#### 区分进程和线程

```
- 进程是一个工厂，工厂有它的独立资源

- 工厂之间相互独立

- 线程是工厂中的工人，多个工人协作完成任务

- 工厂内有一个或多个工人

- 工人之间共享空间
```

再完善完善概念：

```
- 工厂的资源 -> 系统分配的内存（独立的一块内存）

- 工厂之间的相互独立 -> 进程之间相互独立

- 多个工人协作完成任务 -> 多个线程在进程中协作完成任务

- 工厂内有一个或多个工人 -> 一个进程由一个或多个线程组成

- 工人之间共享空间 -> 同一进程下的各个线程之间共享程序的内存空间（包括代码段、数据集、堆等）
```

**进程是cpu资源分配的最小单位（系统会给它分配内存）**

* 进程是cpu资源分配的最小单位 (是能拥有资源和独立运行的最小单位)
* 线程是cpu调度的最小单位 (线程是建立在进程的基础上的一次程序运行单位，一个进程中可以有多个线程)

tips

* 不同的进程之间也可以通信 不过代价较大
* **单线程与多线程 都是指在一个进程内的单和多** 所以核心还是属于一个进程



#### 浏览器是多进程的

* 浏览器是多进程的
* 浏览器之所以能够运行 因为系统给它的进程分配了资源（cpu、内存）
* 每打开一个Tab页 相当于创建一个独立的浏览器进程



##### 浏览器的进程

1. Browser进程 浏览器主进程（负责协调、主控）只有一个 作用：
   * 负责浏览器界面显示 用户交互 前进、后退
   * 负责各个页面的管理 创建和销毁其他进程
   * 将Renderer进程得到的内存中的Bitmap 绘制到用户界面上
   * 网络资源的管理、下载
2. 第三方插件进程 每个类型的插件对应一个进程 仅当使用该插件时才创建
3. GPU进程 绘制3D
4. 浏览器渲染进程（浏览器内核）默认每个Tab页面一个进程。互不影响 主要作用为：
   * 页面渲染 脚本执行 事件处理

**浏览器中打开了一个网页相当于新启了一个进程。进程内有自己的多线程**



##### 重点是浏览器内核 （渲染进程）

页面的渲染 js的执行 事件的循环 都在这个进程内执行。**浏览器的渲染进程是多线程的**

* GUI渲染线程
  * 负责渲染浏览器界面 解析HTML CSS 构建DOM树和RenderObject树 布局和绘制
  * 当界面需要重绘（Repaint）或由于某种操作引发回流（reflow）时。 该线程就会执行
  * **GUI渲染线程与JS引擎线程是互斥的。当JS引擎执行时** GUI线程就会被挂起。GUI更新会被保存在一个队列中等到JS引擎空闲时立即执行。
* JS引擎线程
  * js内核 负责处理JavaScript 脚本程序
  * JS引擎线程负责解析JavaScript脚本 运行代码
  * js引擎一直等待着任务队列中任务的到来。然后处理。 一个Tab只有一个js线程在运行js程序
  * GUI渲染线程与JS引擎线程是互斥的。所以如果JS执行的时间过长 这样就会造成页面的渲染不连贯 导致页面渲染加载阻塞
* 事件触发线程
  * 属于浏览器而不是js引擎 用来控制事件循环
  * ​
* ​

